(this["webpackJsonptrade-wars-static"]=this["webpackJsonptrade-wars-static"]||[]).push([[0],{42:function(e,t,a){e.exports=a(68)},47:function(e,t,a){},49:function(e,t,a){},54:function(e,t,a){},56:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(26),s=a.n(r),o=(a(47),a(48),a(49),a(7)),c=a(8),l=a(10),m=a(9),h=a(11),u=a(23),p=a(20),d=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.routes;return Object.keys(e).map((function(t,a){return e[t].disabled?null:i.a.createElement(p.b,{key:a,exact:!0,path:e[t].path,component:e[t].component})}))}}]),t}(n.Component),y=a(5),g=a(69),v=a(70),b=a(72),f=a(71),O=(a(54),a(22)),j="ADD_PLAYERNAME",k="ADD_WEBSOCKET";var E=a(30),N=a.n(E);var w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={playerName:-1,socket:a.props.webSocket},a.tempPlayerName="",a.setPlayerName=a.setPlayerName.bind(Object(y.a)(a)),a.changeTempPlayerName=a.changeTempPlayerName.bind(Object(y.a)(a)),a.readyForRedirect=a.readyForRedirect.bind(Object(y.a)(a)),a.findCookieCallSign=a.findCookieCallSign.bind(Object(y.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.socket.onopen=function(){setInterval((function(){e.state.socket.send(JSON.stringify({command:"ping"}))}),3e4)},this.state.socket.onmessage=function(e){console.log(e)}}},{key:"changeTempPlayerName",value:function(e){this.tempPlayerName=e.target.value}},{key:"setPlayerName",value:function(){var e=this;""!==this.tempPlayerName&&this.setState({playerName:this.tempPlayerName},(function(){var t=e.tempPlayerName;N.a.set("callsign",t,{expires:5}),e.props.addPlayername(t)}))}},{key:"findCookieCallSign",value:function(){var e=this;void 0!==N.a.get("callsign")&&this.setState({playerName:this.tempPlayerName},(function(){var t=N.a.get("callsign");e.props.addPlayername(t),e.state.socket.onopen=function(){console.log("Test"),e.state.socket.send(JSON.stringify({command:"setCallsign",callsign:t}))}}))}},{key:"readyForRedirect",value:function(){if(-1!==this.state.playerName)return i.a.createElement(p.a,{to:"/game"})}},{key:"render",value:function(){return i.a.createElement("div",{className:"get-name-background"},this.findCookieCallSign(),this.readyForRedirect(),i.a.createElement("div",{className:"username-card"},i.a.createElement("h1",null,"Trade Wars!"),i.a.createElement(g.a,null,i.a.createElement(v.a,{onChange:this.changeTempPlayerName,placeholder:"Username"}),i.a.createElement(b.a,{addonType:"append"},i.a.createElement(f.a,{onClick:this.setPlayerName},"Play")))))}}]),t}(n.Component),S=Object(O.b)((function(e){return{webSocket:e.webSocket}}),(function(e){return{addPlayername:function(t){return e({type:j,payload:t})},addWebSocket:function(t){return e({type:k,payload:t})}}}))(w),x=(a(56),a(21)),P=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(x.Sprite,{image:"https://cdn1.iconfinder.com/data/icons/space-133/64/spaceship-planet-space-colony-city-512.png",x:this.props.x,y:this.props.y,scale:{x:.05,y:.05}})}}]),t}(n.Component),W=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(x.Sprite,{image:"https://www.gfxmag.com/wp-content/uploads/2017/01/satellite-emoji-vector-icon-1.png",x:this.props.x,y:this.props.y,scale:{x:.5,y:.5}})}}]),t}(n.Component),C=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).xMove=0,a.yMove=0,a.state={gameWidth:a.props.gameWidth,gameHeight:a.props.gameHeight,playerLocation:{x:0,y:0},modalOpen:!0},a.handleKeyPress=a.handleKeyPress.bind(Object(y.a)(a)),a.moveX=a.moveX.bind(Object(y.a)(a)),a.moveY=a.moveY.bind(Object(y.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({gameWidth:this.state.gameWidth-.012*this.state.gameWidth,gameHeight:this.state.gameHeight-.015*this.state.gameHeight},(function(){e.xMove=e.state.gameWidth/20,e.yMove=e.state.gameHeight/20,e.setState({playerLocation:{x:e.xMove,y:e.yMove-e.yMove/2}})})),window.addEventListener("keydown",this.handleKeyPress)}},{key:"handleKeyPress",value:function(e){switch(e.code){case"ArrowUp":this.moveY(-1*this.yMove);break;case"ArrowDown":this.moveY(this.yMove);break;case"ArrowLeft":this.moveX(-1*this.xMove);break;case"ArrowRight":this.moveX(this.xMove)}}},{key:"moveY",value:function(e){var t={y:this.state.playerLocation.y+e,x:this.state.playerLocation.x};t.y>=0&&t.y<=this.state.gameHeight&&this.setState({playerLocation:{x:t.x,y:t.y}})}},{key:"moveX",value:function(e){var t={y:this.state.playerLocation.y,x:this.state.playerLocation.x+e};t.x+e>=0&&t.x<=this.state.gameWidth&&this.setState({playerLocation:{x:t.x,y:t.y}})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(x.Stage,{width:this.state.gameWidth,height:this.state.gameHeight,options:{backgroundColor:1909296}},i.a.createElement(x.Graphics,{x:0,y:0}),i.a.createElement(W,{x:100,y:100}),i.a.createElement(P,{x:this.state.playerLocation.x,y:this.state.playerLocation.y})))}}]),t}(n.Component),M=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state=a.props.parentDivDimensions,a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({gameWidth:this.state.gameWidth-.012*this.state.gameWidth,gameHeight:this.state.gameHeight-.015*this.state.gameHeight})}},{key:"render",value:function(){return i.a.createElement(C,{gameWidth:this.state.gameWidth,gameHeight:this.state.gameHeight})}}]),t}(n.Component),D=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={gameWidth:-1,gameHeight:-1},a.isPlayernameSet=a.isPlayernameSet.bind(Object(y.a)(a)),a.renderGameStage=a.renderGameStage.bind(Object(y.a)(a)),a.GameDiv=i.a.createRef(),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"isPlayernameSet",value:function(){if(-1===this.props.playerName)return i.a.createElement(p.a,{to:"/"})}},{key:"componentDidMount",value:function(){this.setState({gameWidth:this.GameDiv.current.offsetWidth,gameHeight:this.GameDiv.current.offsetHeight})}},{key:"renderGameStage",value:function(){if(-1!==this.state.gameWidth&&-1!==this.state.gameHeight)return i.a.createElement(M,{parentDivDimensions:this.state})}},{key:"render",value:function(){return i.a.createElement("div",{className:"game-background"},this.isPlayernameSet(),i.a.createElement("h1",{className:"game-title"},"Welcome ",i.a.createElement("u",null,i.a.createElement("b",null,this.props.playerName))," to Trade Wars"),i.a.createElement("div",{className:"game-window-container"},i.a.createElement("div",{ref:this.GameDiv,className:"render-container"},this.renderGameStage()),i.a.createElement("div",{className:"game-status-container"},i.a.createElement("div",{className:"game-cargo-container"},i.a.createElement("p",{className:"game-status-title"},"Cargo")),i.a.createElement("div",{className:"game-status-text-container"},i.a.createElement("p",{className:"game-status-title"},"Messages")))))}}]),t}(n.Component),H={GetName:{path:"/",component:S,disabled:!1},MainGame:{path:"/game",component:D=Object(O.b)((function(e){return{playerName:e.playerName}}))(D),disabled:!1}},L=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(u.a,null,i.a.createElement(d,{routes:H}))}}]),t}(n.Component);var G=function(){return i.a.createElement("div",{className:"App"},i.a.createElement("main",null,i.a.createElement(L,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=a(29),T={playerName:-1,webSocket:new WebSocket("ws://trade-wars-backend.herokuapp.com/gameServer")};var R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object.assign({},e,{playerName:e.playerName=t.payload});case k:return Object.assign({},e,{webSocket:e.webSocket=t.payload})}return e},Y=Object(A.b)(R);s.a.render(i.a.createElement(O.a,{store:Y},i.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.8f277d54.chunk.js.map